@use "sass:color";
@use "@styles/variables" as *;

/* =====================================================
   Overlay
===================================================== */

.overlay {
  position: fixed;
  inset: 0;
  z-index: 1000;

  display: flex;
  align-items: center;
  justify-content: center;

  padding: 16px;

  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(2px);
}

/* =====================================================
     Modal
  ===================================================== */

.modal {
  width: 100%;
  max-width: 920px;
  max-height: 92vh;

  display: flex;
  flex-direction: column;

  background: $white;
  border-radius: 14px;
  overflow: hidden;

  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
}

/* =====================================================
     Header / Footer
  ===================================================== */

.header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;

  padding: 18px 20px;
  border-bottom: 1px solid $gray-200;
}

.headerText {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;

  padding: 12px 20px;
  border-top: 1px solid $gray-200;

  position: relative;
  z-index: 2;
}

/* =====================================================
     Content
  ===================================================== */

.content {
  flex: 1;
  overflow: auto;

  padding: 18px 20px;

  display: flex;
  flex-direction: column;
  gap: 22px;
}

/* =====================================================
     Feedback / States
  ===================================================== */

.notice {
  padding: 10px 12px;
  border-radius: 10px;
  background: $gray-100;
  color: $text-color;
}

.loading {
  padding: 24px 0;
}

/* =====================================================
     Sections
  ===================================================== */

.section {
  display: flex;
  flex-direction: column;
  gap: 22px;
}

.sectionHeader {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.sectionMeta {
  flex-shrink: 0;
  opacity: 0.6;
}

/* =====================================================
     Add Panel (azione opzionale)
  ===================================================== */

.addPanel {
  border-radius: 12px;
  padding: 14px;

  background: rgba($brand-primary, 0.04);
  border: 1px dashed rgba($brand-primary, 0.35);

  display: flex;
  flex-direction: column;
  gap: 12px;
}

.addRow {
  display: grid;
  grid-template-columns: 1.3fr 0.9fr 1.3fr;
  gap: 12px;
}

.addActions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

/* =====================================================
     Fields
  ===================================================== */

.field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.select {
  width: 100%;
  height: 36px;

  padding: 0 10px;
  border-radius: 10px;

  border: 1px solid $gray-300;
  background: $white;
  color: $text-color;
}

.timeRow {
  display: flex;
  align-items: center;
  gap: 8px;
}

.time {
  height: 36px;
  width: 100%;

  padding: 0 10px;
  border-radius: 10px;

  border: 1px solid $gray-300;
  background: $white;
  color: $text-color;
}

/* =====================================================
     Days chips
  ===================================================== */

.days {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.dayChip,
.dayChipActive {
  appearance: none;
  cursor: pointer;

  padding: 6px 10px;
  border-radius: 999px;

  font-size: 12px;
  line-height: 1;

  background: $white;
  border: 1px solid $gray-300;
  color: $gray-700;
}

.dayChipActive {
  background: rgba($brand-primary, 0.12);
  border-color: rgba($brand-primary, 0.45);
  color: $brand-dark;
}

/* =====================================================
     Toggle
  ===================================================== */

.toggleBtn {
  appearance: none;
  background: transparent;
  border: 0;
  padding: 6px 10px;
  border-radius: 8px;

  cursor: pointer;
  color: $brand-primary;

  opacity: 0.8;
}

.toggleBtn:hover {
  background: rgba($brand-primary, 0.08);
  opacity: 1;
}

/* =====================================================
     List
  ===================================================== */

.list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.empty {
  padding: 10px 4px;
  color: $gray-500;
}

/* =====================================================
     Rule row (read mode)
  ===================================================== */

.ruleWrap {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.rule {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;

  padding: 14px 16px;
  border-radius: 12px;

  background: $white;
  border: 1px solid $gray-200;
}

.rule[data-active="true"] {
  background: rgba($brand-primary, 0.06);
  border-color: rgba($brand-primary, 0.45);
}

.ruleMain {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.ruleTopLine {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

/* =====================================================
     Badge "Attivo ora"
  ===================================================== */

.badge {
  display: inline-flex;
  align-items: center;

  padding: 4px 8px;
  border-radius: 999px;

  background: rgba($brand-primary, 0.14);
  border: 1px solid rgba($brand-primary, 0.45);
  color: $brand-dark;

  flex-shrink: 0;
}

/* =====================================================
     Icon button (Modifica)
  ===================================================== */

.iconBtn {
  appearance: none;
  cursor: pointer;

  padding: 6px 10px;
  border-radius: 10px;

  background: transparent;
  border: 0;

  color: $brand-primary;
  opacity: 0.75;
}

.iconBtn:hover {
  background: rgba($brand-primary, 0.08);
  opacity: 1;
}

/* =====================================================
     Editor (edit mode)
  ===================================================== */

.editor {
  padding: 14px;
  border-radius: 12px;

  background: $gray-100;
  border: 1px solid $gray-200;
}

.editorGrid {
  display: grid;
  grid-template-columns: 1.3fr 0.9fr 1.3fr;
  gap: 12px;
}

.editorActions {
  margin-top: 12px;

  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

/* =====================================================
     Responsive
  ===================================================== */

@media (max-width: 820px) {
  .addRow,
  .editorGrid {
    grid-template-columns: 1fr;
  }

  .addActions {
    flex-direction: column;
    align-items: stretch;
  }

  .modal {
    max-height: 100vh;
    border-radius: 12px;
  }
}

@media (max-width: 520px) {
  .overlay {
    padding: 10px;
  }

  .header,
  .content,
  .footer {
    padding-left: 14px;
    padding-right: 14px;
  }
  .content {
    padding-bottom: 72px;
  }
  .footer {
    position: sticky;
    bottom: 0;

    background: $white;
    box-shadow: 0 -6px 12px rgba(0, 0, 0, 0.06);
  }
}
